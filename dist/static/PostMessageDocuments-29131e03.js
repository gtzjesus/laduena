import{r as f,c as w,u as E,bg as P,b2 as l,cs as R,ct as D,cu as I}from"./sanity-3b6b2486.js";const S=s=>{const e=w(13),{comlink:t}=s;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={apiVersion:P},e[0]=o):o=e[0];const n=E(o);let c,a;e[1]!==n||e[2]!==t?(c=()=>{const i=n.listen('*[!(_id in path("_.**"))]',{},{effectFormat:"mendoza",events:["welcome","mutation","reconnect"],includePreviousRevision:!1,includeResult:!1,tag:"presentation-documents",visibility:"transaction"}).pipe(l(x)),b=i.pipe(l(z),R({bufferSize:1,refCount:!1})),d=t.on("visual-editing/snapshot-welcome",async()=>({event:await new Promise(y=>{b.pipe(D()).subscribe(h=>{y(h)})})})),v=i.pipe(l(C)),g=i.pipe(l(M)),_=I(b,g,v).subscribe(y=>{t.post({type:"presentation/snapshot-event",data:{event:y}})});return()=>{d(),_.unsubscribe()}},a=[n,t],e[1]=n,e[2]=t,e[3]=c,e[4]=a):(c=e[3],a=e[4]),f.useEffect(c,a);let u,r;e[5]!==n||e[6]!==t?(u=()=>t.on("visual-editing/fetch-snapshot",async i=>({snapshot:await n.getDocument(i.documentId,{tag:"document.snapshots"})})),r=[n,t],e[5]=n,e[6]=t,e[7]=u,e[8]=r):(u=e[7],r=e[8]),f.useEffect(u,r);let p,m;return e[9]!==n||e[10]!==t?(p=()=>t.on("visual-editing/mutate",async i=>n.dataRequest("mutate",i,{visibility:"async",returnDocuments:!0})),m=[n,t],e[9]=n,e[10]=t,e[11]=p,e[12]=m):(p=e[11],m=e[12]),f.useEffect(p,m),null};var $=f.memo(S);function x(s){return s.type==="welcome"||s.type==="reconnect"||s.type==="mutation"}function z(s){return s.type==="welcome"}function C(s){return s.type==="reconnect"}function M(s){return s.type==="mutation"}export{$ as default};
