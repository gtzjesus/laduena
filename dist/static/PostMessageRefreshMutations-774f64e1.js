import{r as m,c as M,bR as g,aK as v,j as x}from"./sanity-3b6b2486.js";function y(u){const t=M(8),{comlink:e,type:s,previewKitConnection:o,loadersConnection:r}=u;let a,d;t[0]!==u.id?(d=g(u.id),t[0]=u.id,t[1]=d):d=t[1],a=d;const n=a,{draft:l,published:i,ready:f}=v(n,s,"low"),_=o==="connected"||r==="connected";if(f&&l||i){let c;return t[2]!==e||t[3]!==l||t[4]!==n||t[5]!==_||t[6]!==i?(c=x.jsx(R,{comlink:e,draft:l,livePreviewEnabled:_,published:i},n),t[2]=e,t[3]=l,t[4]=n,t[5]=_,t[6]=i,t[7]=c):c=t[7],c}return null}function R(u){const t=M(14),{comlink:e,draft:s,published:o,livePreviewEnabled:r}=u,[a,d]=m.useState(s),[n,l]=m.useState(o);let i;t[0]!==e||t[1]!==s||t[2]!==r||t[3]!==(a==null?void 0:a._rev)||t[4]!==(n==null?void 0:n._rev)||t[5]!==o?(i=()=>{(a==null?void 0:a._rev)!==(s==null?void 0:s._rev)&&(m.startTransition(()=>d(s)),s&&(e==null||e.post({type:"presentation/refresh",data:{source:"mutation",livePreviewEnabled:r,document:E(s)}}))),(n==null?void 0:n._rev)!==(o==null?void 0:o._rev)&&(m.startTransition(()=>l(o)),o&&(e==null||e.post({type:"presentation/refresh",data:{source:"mutation",livePreviewEnabled:r,document:E(o)}})))},t[0]=e,t[1]=s,t[2]=r,t[3]=a==null?void 0:a._rev,t[4]=n==null?void 0:n._rev,t[5]=o,t[6]=i):i=t[6];const f=a==null?void 0:a._rev,_=n==null?void 0:n._rev;let c;return t[7]!==e||t[8]!==s||t[9]!==r||t[10]!==o||t[11]!==f||t[12]!==_?(c=[e,s,r,f,_,o],t[7]=e,t[8]=s,t[9]=r,t[10]=o,t[11]=f,t[12]=_,t[13]=c):c=t[13],m.useEffect(i,c),null}function E(u){const{_id:t,_type:e,_rev:s,slug:o}=u;return{_id:t,_type:e,_rev:s,slug:o}}var j=m.memo(y);export{j as default};
